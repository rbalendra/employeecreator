<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cloudinary Upload Test</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                padding: 20px;
            }

            .container {
                max-width: 600px;
                margin: 0 auto;
            }

            .form-group {
                margin-bottom: 20px;
            }

            label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
            }

            input,
            button {
                padding: 8px;
                border: 1px solid #ccc;
                border-radius: 4px;
            }

            button {
                background-color: #007bff;
                color: white;
                border: none;
                cursor: pointer;
            }

            button:hover {
                background-color: #0056b3;
            }

            .result {
                margin-top: 20px;
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 4px;
            }

            .success {
                background-color: #d4edda;
                border-color: #c3e6cb;
                color: #155724;
            }

            .error {
                background-color: #f8d7da;
                border-color: #f5c6cb;
                color: #721c24;
            }

            img {
                max-width: 300px;
                margin-top: 10px;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>Cloudinary Upload Test</h1>
            <p>Use this page to test your Cloudinary upload configuration before using it in your React app.</p>

            <div class="form-group">
                <label for="cloudName">Cloud Name:</label>
                <input type="text" id="cloudName" value="rbalendra" />
            </div>

            <div class="form-group">
                <label for="uploadPreset">Upload Preset:</label>
                <input type="text" id="uploadPreset" value="employee_profile" />
            </div>

            <div class="form-group">
                <label for="fileInput">Select Image:</label>
                <input type="file" id="fileInput" accept="image/*" />
            </div>

            <button onclick="testUpload()">Test Upload</button>

            <div id="result"></div>
        </div>

        <script>
            async function testUpload() {
                const cloudName = document.getElementById('cloudName').value;
                const uploadPreset = document.getElementById('uploadPreset').value;
                const fileInput = document.getElementById('fileInput');
                const resultDiv = document.getElementById('result');

                if (!fileInput.files[0]) {
                    resultDiv.innerHTML = '<div class="result error">Please select a file first.</div>';
                    return;
                }

                const file = fileInput.files[0];
                const uploadUrl = `https://api.cloudinary.com/v1_1/${cloudName}/upload`;

                console.log('Testing upload with:', {
                    cloudName,
                    uploadPreset,
                    uploadUrl,
                    fileName: file.name,
                    fileSize: file.size,
                    fileType: file.type
                });

                resultDiv.innerHTML = '<div class="result">Uploading... Please wait.</div>';

                try {
                    const formData = new FormData();
                    formData.append('file', file);
                    formData.append('upload_preset', uploadPreset);
                    formData.append('folder', 'employee-photos');

                    const response = await fetch(uploadUrl, {
                        method: 'POST',
                        body: formData
                    });

                    const data = await response.json();

                    console.log('Response:', data);

                    if (response.ok && data.secure_url) {
                        resultDiv.innerHTML = `
                        <div class="result success">
                            <h3>Upload Successful! ✅</h3>
                            <p><strong>Image URL:</strong> <a href="${data.secure_url}" target="_blank">${data.secure_url}</a></p>
                            <p><strong>Public ID:</strong> ${data.public_id}</p>
                            <img src="${data.secure_url}" alt="Uploaded image" />
                        </div>
                    `;
                    } else {
                        resultDiv.innerHTML = `
                        <div class="result error">
                            <h3>Upload Failed ❌</h3>
                            <p><strong>Error:</strong> ${data.error?.message || 'Unknown error'}</p>
                            <p><strong>Details:</strong> ${JSON.stringify(data, null, 2)}</p>
                        </div>
                    `;
                    }
                } catch (error) {
                    console.error('Upload error:', error);
                    resultDiv.innerHTML = `
                    <div class="result error">
                        <h3>Upload Failed ❌</h3>
                        <p><strong>Error:</strong> ${error.message}</p>
                        <p>Check the browser console for more details.</p>
                    </div>
                `;
                }
            }
        </script>
    </body>

</html>